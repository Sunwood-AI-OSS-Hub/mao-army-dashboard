# 魔王軍 AGI ダッシュボード - UI刷新 機能要件

> 魔王軍のエージェントチーム管理ダッシュボードのUI刷新に向けた機能要件定義

## 1. 現在の実装状況

### 1.1 実装済み機能

| 機能 | 説明 | コンポーネント/API |
|------|------|-------------------|
| チーム一覧表示 | 全チームの概要をカード形式で表示 | `page.tsx`, `InfernoTeamCard.tsx` |
| チームカード | メンバー数、タスク状況、進行状況バーを表示 | `InfernoTeamCard.tsx` |
| チーム詳細モーダル | チームの詳細情報をモーダルで表示 | `page.tsx` |
| タブ機能 | チーム情報とメッセージを切り替え | `page.tsx` |
| メンバー一覧 | エージェント名、タイプ、状態、説明を表示 | `page.tsx` |
| タスク一覧 | タスク名、ステータス、説明、担当者を表示 | `page.tsx` |
| inboxメッセージ表示 | エージェントごとのメッセージ一覧 | `AgentInboxView.tsx` |
| リアルタイム更新 | SSEによる自動更新 | `page.tsx`, `/api/stream` |
| ヘッダー/サイドバー | タイトル、検索、ナビゲーション | `InfernoHeader.tsx`, `InfernoSidebar.tsx` |

### 1.2 APIエンドポイント

| エンドポイント | 説明 | レスポンス型 |
|---------------|------|------------|
| `GET /api/teams` | 全チームの概要を取得 | `TeamSummary[]` |
| `GET /api/tasks/[teamId]` | 指定チームの詳細を取得 | `TeamMonitorData` |
| `GET /api/inboxes/[teamName]` | 指定チームのinboxを取得 | `TeamInboxData` |
| `GET /api/stream` | SSEによるリアルタイム更新 | `text/event-stream` |

### 1.3 データ構造

```typescript
// チーム概要
interface TeamSummary {
  name: string;
  description: string;
  memberCount: number;
  activeTasks: number;
  completedTasks: number;
  totalTasks: number;
  isActive: boolean;
  lastUpdated: number;
}

// チーム詳細
interface TeamMonitorData {
  config: TeamConfig;
  tasks: TeamTask[];
  isActive: boolean;
  lastUpdated: number;
}

// チームメンバー
interface TeamMember {
  agentId: string;
  name: string;
  agentType: string;
  model: string;
  prompt?: string;
  color?: string;
  planModeRequired: boolean;
  joinedAt: number;
  tmuxPaneId: string;
  cwd: string;
  subscriptions: string[];
  backendType: string;
  isActive: boolean;
  description?: string; // inboxの最初のメッセージから抽出
}

// タスク
interface TeamTask {
  id: string;
  subject: string;
  description: string;
  activeForm: string;
  status: 'pending' | 'in_progress' | 'completed';
  blocks: string[];
  blockedBy: string[];
  owner?: string;
  metadata?: Record<string, unknown>;
}

// inboxメッセージ
interface InboxMessage {
  from: string;
  text: string;
  timestamp: string;
  read: boolean;
  summary?: string;
  color?: string;
}
```

---

## 2. UI刷新に向けた機能要件

### 2.1 ページ構成

#### ホームページ（軍団一覧）

```
┌─────────────────────────────────────────────────────────────────┐
│                        ヘッダー                                    │
│  [ロゴ] 魔王軍 AGI ダッシュボード        [更新] [検索] [フィルター]   │
├─────────────────────────────────────────────────────────────────┤
│  絞り込み: [全て] [アクティブ] [非アクティブ]  ソート: [更新日順]   │
├─────────────────────────────────────────────────────────────────┤
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐         │
│  │ チーム1   │  │ チーム2   │  │ チーム3   │  │ チーム4   │         │
│  │ [カード]  │  │ [カード]  │  │ [カード]  │  │ [カード]  │         │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘         │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐         │
│  │ チーム5   │  │ チーム6   │  │  新規追加  │  │           │         │
│  │ [カード]  │  │ [カード]  │  │ [+]       │  │           │         │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘         │
└─────────────────────────────────────────────────────────────────┘
```

#### チーム詳細ページ

```
┌─────────────────────────────────────────────────────────────────┐
│                        ヘッダー                                    │
│  [< 戻る] チーム名                              [編集] [削除]      │
├─────────────────────────────────────────────────────────────────┤
│  [概要] [メンバー] [タスク] [メッセージ] [設定]                   │
├─────────────────────────────────────────────────────────────────┤
│  [選択されたタブの内容]                                           │
│                                                                   │
│  例: 概要タブ                                                    │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ チーム説明: ...                                            │  │
│  │ 作成日: ...                                               │  │
│  │ リーダー: ...                                             │  │
│  │ 統計: メンバー数、アクティブ数、タスク完了率               │  │
│  └──────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
```

### 2.2 コンポーネント要件

#### 2.2.1 チームカード (InfernoTeamCard)

**現在の実装:**
- チーム名、説明
- メンバー数、進行中タスク、完了タスク
- 進行状況バー
- アクティブ状態のインジケーター

**刷新案:**
- チーム名、説明
- メンバー数、進行中タスク、完了タスク
- 進行状況バー（円形プログレスも検討）
- アクティブ状態のインジケーター
- クイックアクションボタン（編集、削除）
- ホバー時の詳細プレビュー
- タグ/カテゴリ表示

#### 2.2.2 チーム詳細モーダル/ページ

**現在の実装:**
- タブ機能（チーム情報、メッセージ）
- メンバー一覧（名前、タイプ、状態、説明）
- タスク一覧（名前、ステータス、説明、担当者）
- inboxメッセージ表示

**刷新案:**
- タブ機能（概要、メンバー、タスク、メッセージ、設定）
- メンバー一覧（アバター、名前、タイプ、状態、説明、アクション）
- タスク一覧（カンバン形式も検討、フィルター、ソート）
- inboxメッセージ表示（スレッド形式、検索、フィルター）
- アクティビティタイムライン
- 統計ダッシュボード

#### 2.2.3 ヘッダー (InfernoHeader / InfernoSidebar)

**現在の実装:**
- 魔王軍団テーマ（炎のエフェクト、王冠アイコン）
- タイトル、サブタイトル
- アニメーション効果

**刷新案:**
- テーマ切り替え（魔王軍団、桃太郎、猫の運営するシステム会社など）
- ナビゲーションメニュー
- 検索バー
- ユーザープロフィール
- 通知センター
- 設定

#### 2.2.4 メンバー一覧

**現在の実装:**
- 名前、エージェントタイプ
- アクティブ/オフライン状態
- inboxから抽出した説明

**刷新案:**
- アバター画像（自動生成）
- 名前、エージェントタイプ
- 状態（アクティブ、アイドル、ビジー、オフライン）
- 現在のタスク
- 統計（完了タスク数、参加日時など）
- アクション（メッセージ送信、タスク割り当て）
- 詳細モーダル

#### 2.2.5 タスク一覧

**現在の実装:**
- タスク名、ステータス、説明、担当者
- ステータスバッジ

**刷新案:**
- カンバン形式（待機中、進行中、完了）
- リスト形式（フィルター、ソート）
- タスク名、ステータス、説明、担当者
- 優先度、期限
- サブタスク
- アクション（編集、削除、コメント）
- ドラッグ&ドロップでステータス変更

#### 2.2.6 inboxメッセージ表示

**現在の実装:**
- エージェントごとのメッセージ一覧
- 未読/既読状態
- タイムスタンプ
- システムメッセージのハイライト

**刷新案:**
- スレッド形式
- チャット形式
- 検索、フィルター
- 未読/既読状態
- タイムスタンプ
- システムメッセージのハイライト
- 添付ファイル
- リアクション
- 返信機能

### 2.3 新機能要件

#### 2.3.1 ダッシュボード機能

- 全チームの統計概要
- アクティブメンバー数
- タスク完了率
- アクティビティグラフ
- 最近のアクティビティ

#### 2.3.2 検索・フィルター機能

- チーム名で検索
- メンバー名で検索
- タスク名で検索
- メッセージ内容で検索
- 状態フィルター
- タグフィルター
- 日付範囲フィルター

#### 2.3.3 通知機能

- 新しいタスクの通知
- タスク完了の通知
- 新しいメッセージの通知
- メンバー状態変化の通知
- 通知履歴

#### 2.3.4 設定機能

- テーマ切り替え
- 表示設定（ダークモード、ライトモード）
- 通知設定
- リフレッシュ間隔設定
- API設定

#### 2.3.5 エクスポート・インポート機能

- チームデータのエクスポート
- タスクデータのエクスポート
- メッセージデータのエクスポート
- データのインポート

### 2.4 UI/UX 要件

#### 2.4.1 デザインシステム

- カラーパレット（魔王軍団テーマ、カスタマイズ可能）
- タイポグラフィ
- スペーシング
- シャドウ
- ボーダー
- アニメーション

#### 2.4.2 レスポンシブデザイン

- モバイル対応
- タブレット対応
- デスクトップ対応

#### 2.4.3 アクセシビリティ

- キーボードナビゲーション
- スクリーンリーダー対応
- コントラスト比
- フォントサイズ

#### 2.4.4 パフォーマンス

- 遅延読み込み
- 仮想スクロール
- メモ化
- コード分割

---

## 3. 技術スタック

### 3.1 現行

- Next.js 16.1 (App Router)
- TypeScript 5.x
- Tailwind CSS v4
- Lucide React

### 3.2 刷新検討

- shadcn/ui コンポーネントライブラリ
- Framer Motion アニメーション
- React Query データフェッチ
- Zustand 状態管理
- React Hook Form フォーム管理
- Zod バリデーション

---

## 4. 優先順位

### 4.1 高優先度（P0）

1. チーム詳細ページの独立
2. 検索・フィルター機能
3. ダッシュボード機能
4. レスポンシブデザイン

### 4.2 中優先度（P1）

1. カンバン形式のタスク一覧
2. 通知機能
3. テーマ切り替え
4. エクスポート・インポート機能

### 4.3 低優先度（P2）

1. アクティビティタイムライン
2. 統計ダッシュボード
3. 設定機能
4. アクセシビリティ向上

---

## 5. マイルストーン

### マイルストーン 1: 基礎 UI 刷新

- チーム詳細ページの独立
- 検索・フィルター機能
- レスポンシブデザイン

### マイルストーン 2: 機能拡張

- ダッシュボード機能
- カンバン形式のタスク一覧
- 通知機能

### マイルストーン 3: UX 向上

- テーマ切り替え
- アクティビティタイムライン
- 統計ダッシュボード

---

## 6. 今後の検討事項

- 認証・認可機能の追加
- リアルタイムコラボレーション機能
- モバイルアプリ
- データベース移行
- WebSocketへの移行

---

……ふふ、これが私たちの目指すべき姿だよ。一緒に素晴らしいダッシュボードを作ろう！
